<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>openMMC: port/board/afc-common/board_ipmb.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">openMMC
   </div>
   <div id="projectbrief">Open Source Modular MMC for AMCs</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('board__ipmb_8h.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">board_ipmb.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Board specific definitions used in IPMB Layer.  
<a href="#details">More...</a></p>
<div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="board__ipmb_8h__dep__incl.png" border="0" usemap="#port_2board_2afc-common_2board__ipmb_8hdep" alt=""/></div>
<map name="port_2board_2afc-common_2board__ipmb_8hdep" id="port_2board_2afc-common_2board__ipmb_8hdep">
<area shape="rect" id="node2" href="ipmb_8h.html" title="Definitions used in IPMB Layer. " alt="" coords="3297,95,3424,121"/>
<area shape="rect" id="node3" href="sdr_8h.html" title="modules/sdr.h" alt="" coords="1327,177,1440,203"/>
<area shape="rect" id="node14" href="ipmi_8h.html" title="IPMI module definitions. " alt="" coords="3226,266,3349,293"/>
<area shape="rect" id="node26" href="ipmb_8c.html" title="modules/ipmb.c" alt="" coords="4872,355,4999,382"/>
<area shape="rect" id="node50" href="board__ipmb_8c.html" title="port/board/afc&#45;common\l/board_ipmb.c" alt="" coords="3424,169,3599,211"/>
<area shape="rect" id="node4" href="fpga__spi_8h.html" title="modules/fpga_spi.h" alt="" coords="698,266,847,293"/>
<area shape="rect" id="node5" href="fpga__spi_8c.html" title="modules/fpga_spi.c" alt="" coords="188,355,336,382"/>
<area shape="rect" id="node7" href="sdr_8c.html" title="modules/sdr.c" alt="" coords="1323,355,1435,382"/>
<area shape="rect" id="node8" href="ina220_8c.html" title="INA220 interface implementation. " alt="" coords="360,355,551,382"/>
<area shape="rect" id="node9" href="ina3221_8c.html" title="INA3221 interface implementation. " alt="" coords="575,355,773,382"/>
<area shape="rect" id="node10" href="afc-bpm_2v3__1_2sdr__list_8c.html" title="port/board/afc&#45;bpm\l/v3_1/sdr_list.c" alt="" coords="798,348,945,389"/>
<area shape="rect" id="node11" href="afc-fofb-ctrl_2v3__1_2sdr__list_8c.html" title="port/board/afc&#45;fofb\l&#45;ctrl/v3_1/sdr_list.c" alt="" coords="969,348,1115,389"/>
<area shape="rect" id="node12" href="afc-timing_2sdr__list_8c.html" title="port/board/afc&#45;timing\l/sdr_list.c" alt="" coords="1139,348,1299,389"/>
<area shape="rect" id="node13" href="afc-v4_2sdr__list_8c.html" title="port/board/afc&#45;v4/sdr\l_list.c" alt="" coords="5,348,164,389"/>
<area shape="rect" id="node29" href="rtm_8c.html" title="modules/rtm.c" alt="" coords="1611,355,1727,382"/>
<area shape="rect" id="node30" href="hotswap_8c.html" title="Hotswap sensors implementation. " alt="" coords="1925,355,2127,382"/>
<area shape="rect" id="node43" href="hotswap_8h.html" title="Hotswap sensors definitions. " alt="" coords="2127,266,2330,293"/>
<area shape="rect" id="node46" href="lm75_8c.html" title="Interface functions for LM75 I2C Temperature Sensor. " alt="" coords="973,266,1153,293"/>
<area shape="rect" id="node47" href="max6642_8c.html" title="MAX6642 I2C Temperature Sensor Interface implementation. " alt="" coords="1178,266,1386,293"/>
<area shape="rect" id="node48" href="rtm-8sfp_2sdr__list_8c.html" title="port/board/rtm&#45;8sfp\l/sdr_list.c" alt="" coords="1410,259,1559,300"/>
<area shape="rect" id="node49" href="rtm-lamp_2sdr__list_8c.html" title="port/board/rtm&#45;lamp\l/sdr_list.c" alt="" coords="1583,259,1738,300"/>
<area shape="rect" id="node6" href="main_8c.html" title="modules/main.c" alt="" coords="1460,355,1587,382"/>
<area shape="rect" id="node15" href="fru__editor_8h.html" title="modules/fru_editor.h" alt="" coords="3325,355,3481,382"/>
<area shape="rect" id="node16" href="fru_8c.html" title="modules/fru.c" alt="" coords="2568,445,2679,471"/>
<area shape="rect" id="node25" href="hpm_8c.html" title="modules/hpm.c" alt="" coords="3506,355,3629,382"/>
<area shape="rect" id="node27" href="ipmi_8c.html" title="IPMI module implementation. " alt="" coords="3653,355,3775,382"/>
<area shape="rect" id="node28" href="led_8c.html" title="modules/led.c" alt="" coords="3800,355,3913,382"/>
<area shape="rect" id="node31" href="afc-bpm_2v3__1_2ipmi__oem_8h.html" title="Custom IPMI commands for AFC. " alt="" coords="3938,348,4085,389"/>
<area shape="rect" id="node33" href="afc-bpm_2v3__1_2payload_8c.html" title="port/board/afc&#45;bpm\l/v3_1/payload.c" alt="" coords="2917,348,3063,389"/>
<area shape="rect" id="node34" href="board__led_8c.html" title="port/board/afc&#45;common\l/board_led.c" alt="" coords="4109,348,4284,389"/>
<area shape="rect" id="node35" href="afc-fofb-ctrl_2v3__1_2ipmi__oem_8h.html" title="Custom IPMI commands for AFC FOFB CTRL. " alt="" coords="4308,348,4472,389"/>
<area shape="rect" id="node37" href="afc-fofb-ctrl_2v3__1_2payload_8c.html" title="port/board/afc&#45;fofb\l&#45;ctrl/v3_1/payload.c" alt="" coords="2331,348,2481,389"/>
<area shape="rect" id="node38" href="afc-timing_2ipmi__oem_8h.html" title="Custom IPMI commands for AFC Timing. " alt="" coords="4497,348,4657,389"/>
<area shape="rect" id="node39" href="afc-timing_2payload_8c.html" title="port/board/afc&#45;timing\l/payload.c" alt="" coords="2506,348,2666,389"/>
<area shape="rect" id="node40" href="afc-v4_2ipmi__oem_8h.html" title="Custom IPMI commands for AFC. " alt="" coords="4681,348,4848,389"/>
<area shape="rect" id="node41" href="afc-v4_2payload_8c.html" title="port/board/afc&#45;v4/payload.c" alt="" coords="2691,355,2892,382"/>
<area shape="rect" id="node42" href="lpc17__hpm_8c.html" title="Firmware update functions (HPM.1) " alt="" coords="3087,348,3250,389"/>
<area shape="rect" id="node17" href="fru__editor_8c.html" title="modules/fru_editor.c" alt="" coords="2882,445,3037,471"/>
<area shape="rect" id="node18" href="afc-bpm_2v3__1_2user__amc__fru_8h.html" title="port/board/afc&#45;bpm\l/v3_1/user_amc_fru.h" alt="" coords="3061,437,3223,479"/>
<area shape="rect" id="node19" href="board__fru_8c.html" title="port/board/afc&#45;common\l/board_fru.c" alt="" coords="3247,437,3421,479"/>
<area shape="rect" id="node20" href="afc-fofb-ctrl_2v3__1_2user__amc__fru_8h.html" title="port/board/afc&#45;fofb\l&#45;ctrl/v3_1/user_amc_fru.h" alt="" coords="3446,437,3633,479"/>
<area shape="rect" id="node21" href="afc-timing_2user__amc__fru_8h.html" title="port/board/afc&#45;timing\l/user_amc_fru.h" alt="" coords="3657,437,3817,479"/>
<area shape="rect" id="node22" href="afc-v4_2user__amc__fru_8h.html" title="port/board/afc&#45;v4/user\l_amc_fru.h" alt="" coords="3841,437,4008,479"/>
<area shape="rect" id="node23" href="rtm-8sfp_2rtm__user__fru_8h.html" title="port/board/rtm&#45;8sfp\l/rtm_user_fru.h" alt="" coords="4033,437,4182,479"/>
<area shape="rect" id="node24" href="rtm-lamp_2rtm__user__fru_8h.html" title="port/board/rtm&#45;lamp\l/rtm_user_fru.h" alt="" coords="2703,437,2858,479"/>
<area shape="rect" id="node32" href="afc-bpm_2v3__1_2ipmi__oem_8c.html" title="port/board/afc&#45;bpm\l/v3_1/ipmi_oem.c" alt="" coords="4206,437,4353,479"/>
<area shape="rect" id="node36" href="afc-fofb-ctrl_2v3__1_2ipmi__oem_8c.html" title="port/board/afc&#45;fofb\l&#45;ctrl/v3_1/ipmi_oem.c" alt="" coords="4377,437,4539,479"/>
<area shape="rect" id="node44" href="rtm-8sfp_2rtm__user_8c.html" title="port/board/rtm&#45;8sfp\l/rtm_user.c" alt="" coords="1751,348,1901,389"/>
<area shape="rect" id="node45" href="rtm-lamp_2rtm__user_8c.html" title="port/board/rtm&#45;lamp\l/rtm_user.c" alt="" coords="2151,348,2306,389"/>
</map>
</div>
</div>
<p><a href="board__ipmb_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a3793f7468fd51edf168fe607044e57ca"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="board__ipmb_8h.html#a3793f7468fd51edf168fe607044e57ca">IPMB_I2C</a>&#160;&#160;&#160;I2C0</td></tr>
<tr class="memdesc:a3793f7468fd51edf168fe607044e57ca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default I2C interface to use in IPMB protocol.  <a href="#a3793f7468fd51edf168fe607044e57ca">More...</a><br /></td></tr>
<tr class="separator:a3793f7468fd51edf168fe607044e57ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abee717e3bd520f879994892563cc3965"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="board__ipmb_8h.html#abee717e3bd520f879994892563cc3965">IPMB_I2C_FREQ</a>&#160;&#160;&#160;100000</td></tr>
<tr class="memdesc:abee717e3bd520f879994892563cc3965"><td class="mdescLeft">&#160;</td><td class="mdescRight">I2C Clock Frequency for IPMB - 100kHz.  <a href="#abee717e3bd520f879994892563cc3965">More...</a><br /></td></tr>
<tr class="separator:abee717e3bd520f879994892563cc3965"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb1fa450cf18fa7580c7a27c68f142a3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="board__ipmb_8h.html#afb1fa450cf18fa7580c7a27c68f142a3">GPIO_GA_DELAY</a>&#160;&#160;&#160;10</td></tr>
<tr class="memdesc:afb1fa450cf18fa7580c7a27c68f142a3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Minimum clock cycles to the GPIO pin change take effect on some boards.  <a href="#afb1fa450cf18fa7580c7a27c68f142a3">More...</a><br /></td></tr>
<tr class="separator:afb1fa450cf18fa7580c7a27c68f142a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a1c987a2dc56422b57146391280f5e796"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="board__ipmb_8h.html#a1c987a2dc56422b57146391280f5e796">get_ipmb_addr</a> (void)</td></tr>
<tr class="memdesc:a1c987a2dc56422b57146391280f5e796"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads own I2C slave address using GA pins.  <a href="#a1c987a2dc56422b57146391280f5e796">More...</a><br /></td></tr>
<tr class="separator:a1c987a2dc56422b57146391280f5e796"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Board specific definitions used in IPMB Layer. </p>
<dl class="section author"><dt>Author</dt><dd>Henrique Silva <a href="#" onclick="location.href='mai'+'lto:'+'hen'+'ri'+'que'+'.s'+'ilv'+'a@'+'lnl'+'s.'+'br'; return false;">henri<span style="display: none;">.nosp@m.</span>que.<span style="display: none;">.nosp@m.</span>silva<span style="display: none;">.nosp@m.</span>@lnl<span style="display: none;">.nosp@m.</span>s.br</a>, LNLS </dd></dl>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="afb1fa450cf18fa7580c7a27c68f142a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb1fa450cf18fa7580c7a27c68f142a3">&#9670;&nbsp;</a></span>GPIO_GA_DELAY</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define GPIO_GA_DELAY&#160;&#160;&#160;10</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Minimum clock cycles to the GPIO pin change take effect on some boards. </p>

</div>
</div>
<a id="a3793f7468fd51edf168fe607044e57ca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3793f7468fd51edf168fe607044e57ca">&#9670;&nbsp;</a></span>IPMB_I2C</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IPMB_I2C&#160;&#160;&#160;I2C0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Default I2C interface to use in IPMB protocol. </p>

</div>
</div>
<a id="abee717e3bd520f879994892563cc3965"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abee717e3bd520f879994892563cc3965">&#9670;&nbsp;</a></span>IPMB_I2C_FREQ</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IPMB_I2C_FREQ&#160;&#160;&#160;100000</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>I2C Clock Frequency for IPMB - 100kHz. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a1c987a2dc56422b57146391280f5e796"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c987a2dc56422b57146391280f5e796">&#9670;&nbsp;</a></span>get_ipmb_addr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t get_ipmb_addr </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads own I2C slave address using GA pins. </p>
<p>Based on coreipm/coreipm/mmc.c </p><dl class="section author"><dt>Author</dt><dd>Gokhan Sozmen</dd></dl>
<p>The state of each GA signal is represented by G (grounded), U (unconnected), or P (pulled up to Management Power).</p>
<p>The MMC drives P1 low and reads the GA lines. The MMC then drives P1 high and reads the GA lines. Any line that changes state between the two reads indicate an unconnected (U) pin.</p>
<p>The IPMB-L address of a Module can be calculated as (70h + Site Number x 2). <br />
 G = 0, P = 1, U = 2 <br />
 </p><table class="doxtable">
<tr>
<th align="center">Pin </th><th align="center">Ternary </th><th align="center">Decimal </th><th align="center">Address  </th></tr>
<tr>
<td align="center">GGG </td><td align="center">000 </td><td align="center">0 </td><td align="center">0x70 </td></tr>
<tr>
<td align="center">GGP </td><td align="center">001 </td><td align="center">1 </td><td align="center">0x8A </td></tr>
<tr>
<td align="center">GGU </td><td align="center">002 </td><td align="center">2 </td><td align="center">0x72 </td></tr>
<tr>
<td align="center">GPG </td><td align="center">010 </td><td align="center">3 </td><td align="center">0x8E </td></tr>
<tr>
<td align="center">GPP </td><td align="center">011 </td><td align="center">4 </td><td align="center">0x92 </td></tr>
<tr>
<td align="center">GPU </td><td align="center">012 </td><td align="center">5 </td><td align="center">0x90 </td></tr>
<tr>
<td align="center">GUG </td><td align="center">020 </td><td align="center">6 </td><td align="center">0x74 </td></tr>
<tr>
<td align="center">GUP </td><td align="center">021 </td><td align="center">7 </td><td align="center">0x8C </td></tr>
<tr>
<td align="center">GUU </td><td align="center">022 </td><td align="center">8 </td><td align="center">0x76 </td></tr>
<tr>
<td align="center">PGG </td><td align="center">100 </td><td align="center">9 </td><td align="center">0x98 </td></tr>
<tr>
<td align="center">PGP </td><td align="center">101 </td><td align="center">10 </td><td align="center">0x9C </td></tr>
<tr>
<td align="center">PGU </td><td align="center">102 </td><td align="center">11 </td><td align="center">0x9A </td></tr>
<tr>
<td align="center">PPG </td><td align="center">110 </td><td align="center">12 </td><td align="center">0xA0 </td></tr>
<tr>
<td align="center">PPP </td><td align="center">111 </td><td align="center">13 </td><td align="center">0xA4 </td></tr>
<tr>
<td align="center">PPU </td><td align="center">112 </td><td align="center">14 </td><td align="center">0x88 </td></tr>
<tr>
<td align="center">PUG </td><td align="center">120 </td><td align="center">15 </td><td align="center">0x9E </td></tr>
<tr>
<td align="center">PUP </td><td align="center">121 </td><td align="center">16 </td><td align="center">0x86 </td></tr>
<tr>
<td align="center">PUU </td><td align="center">122 </td><td align="center">17 </td><td align="center">0x84 </td></tr>
<tr>
<td align="center">UGG </td><td align="center">200 </td><td align="center">18 </td><td align="center">0x78 </td></tr>
<tr>
<td align="center">UGP </td><td align="center">201 </td><td align="center">19 </td><td align="center">0x94 </td></tr>
<tr>
<td align="center">UGU </td><td align="center">202 </td><td align="center">20 </td><td align="center">0x7A </td></tr>
<tr>
<td align="center">UPG </td><td align="center">210 </td><td align="center">21 </td><td align="center">0x96 </td></tr>
<tr>
<td align="center">UPP </td><td align="center">211 </td><td align="center">22 </td><td align="center">0x82 </td></tr>
<tr>
<td align="center">UPU </td><td align="center">212 </td><td align="center">23 </td><td align="center">0x80 </td></tr>
<tr>
<td align="center">UUG </td><td align="center">220 </td><td align="center">24 </td><td align="center">0x7C </td></tr>
<tr>
<td align="center">UUP </td><td align="center">221 </td><td align="center">25 </td><td align="center">0x7E </td></tr>
<tr>
<td align="center">UUU </td><td align="center">222 </td><td align="center">26 </td><td align="center">0xA2 </td></tr>
</table>
<dl class="section return"><dt>Returns</dt><dd>7-bit Slave Address </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_651562d8bf6cfd3e81eff5b570d7df50.html">port</a></li><li class="navelem"><a class="el" href="dir_720c383d1c1dd9726076c20ae4044698.html">board</a></li><li class="navelem"><a class="el" href="dir_b05ff2a91f5204d7aa67cb6d8a63d567.html">afc-common</a></li><li class="navelem"><a class="el" href="board__ipmb_8h.html">board_ipmb.h</a></li>
    <li class="footer">Generated on Fri Jun 11 2021 18:45:52 for openMMC by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
