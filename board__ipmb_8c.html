<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>openMMC: port/board/afc-common/board_ipmb.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">openMMC
   </div>
   <div id="projectbrief">Open Source Modular MMC for AMCs</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('board__ipmb_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">board_ipmb.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="ipmb_8h_source.html">ipmb.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="port_8h_source.html">port.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for board_ipmb.c:</div>
<div class="dyncontent">
<div class="center"><img src="board__ipmb_8c__incl.png" border="0" usemap="#port_2board_2afc-common_2board__ipmb_8c" alt=""/></div>
<map name="port_2board_2afc-common_2board__ipmb_8c" id="port_2board_2afc-common_2board__ipmb_8c">
<area shape="rect" id="node2" href="ipmb_8h.html" title="Definitions used in IPMB Layer. " alt="" coords="289,169,356,196"/>
<area shape="rect" id="node8" href="port_8h.html" title="Port layer (includes all portable functions headers) " alt="" coords="1390,95,1450,121"/>
<area shape="rect" id="node7" href="board__ipmb_8h.html" title="Board specific definitions used in IPMB Layer. " alt="" coords="211,244,322,271"/>
<area shape="rect" id="node10" href="lpc17__gpio_8h.html" title="lpc17_gpio.h" alt="" coords="821,169,925,196"/>
<area shape="rect" id="node12" href="lpc17__i2c_8h.html" title="I2C driver for LPC17xx. " alt="" coords="2253,169,2347,196"/>
<area shape="rect" id="node13" href="lpc17__ssp_8h.html" title="lpc17_ssp.h" alt="" coords="569,169,668,196"/>
<area shape="rect" id="node15" href="lpc17__spi_8h.html" title="Legacy SPI driver definitions for LPC17xx. " alt="" coords="950,169,1045,196"/>
<area shape="rect" id="node17" href="lpc17__watchdog_8h.html" title="Definitions of Watchdog driver implementation for LPC17xx. " alt="" coords="1199,169,1337,196"/>
<area shape="rect" id="node19" href="lpc17__interruptions_8h.html" title="Interruptions control. " alt="" coords="1785,169,1943,196"/>
<area shape="rect" id="node21" href="lpc17__hpm_8h.html" title="Firmware update functions (HPM.1) " alt="" coords="1069,169,1174,196"/>
<area shape="rect" id="node22" href="lpc17__power_8h.html" title="Definitions of power mode selection for LPC17xx. " alt="" coords="1645,169,1760,196"/>
<area shape="rect" id="node24" href="lpc17__pincfg_8h.html" title="Pin Config functions redirection for LPC17xx. " alt="" coords="1362,169,1478,196"/>
<area shape="rect" id="node26" href="arm__cm3__reset_8h.html" title="arm_cm3_reset.h" alt="" coords="1967,169,2102,196"/>
<area shape="rect" id="node27" href="lpc17__uart_8h.html" title="LPC17xx UART interface definitions. " alt="" coords="2126,169,2229,196"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a1c987a2dc56422b57146391280f5e796"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="board__ipmb_8c.html#a1c987a2dc56422b57146391280f5e796">get_ipmb_addr</a> (void)</td></tr>
<tr class="memdesc:a1c987a2dc56422b57146391280f5e796"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads own I2C slave address using GA pins.  <a href="#a1c987a2dc56422b57146391280f5e796">More...</a><br /></td></tr>
<tr class="separator:a1c987a2dc56422b57146391280f5e796"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a827d381e680cc9981d98b35fcef482b6"><td class="memItemLeft" align="right" valign="top">const unsigned char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="board__ipmb_8c.html#a827d381e680cc9981d98b35fcef482b6">IPMBL_TABLE</a> [<a class="el" href="ipmb_8h.html#a85cd4d157a04ad1efedfec4106a1fcac">IPMBL_TABLE_SIZE</a>]</td></tr>
<tr class="memdesc:a827d381e680cc9981d98b35fcef482b6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Table holding all possible address values in IPMB specification.  <a href="#a827d381e680cc9981d98b35fcef482b6">More...</a><br /></td></tr>
<tr class="separator:a827d381e680cc9981d98b35fcef482b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a1c987a2dc56422b57146391280f5e796"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c987a2dc56422b57146391280f5e796">&#9670;&nbsp;</a></span>get_ipmb_addr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t get_ipmb_addr </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads own I2C slave address using GA pins. </p>
<p>Based on coreipm/coreipm/mmc.c </p><dl class="section author"><dt>Author</dt><dd>Gokhan Sozmen</dd></dl>
<p>The state of each GA signal is represented by G (grounded), U (unconnected), or P (pulled up to Management Power).</p>
<p>The MMC drives P1 low and reads the GA lines. The MMC then drives P1 high and reads the GA lines. Any line that changes state between the two reads indicate an unconnected (U) pin.</p>
<p>The IPMB-L address of a Module can be calculated as (70h + Site Number x 2). <br />
 G = 0, P = 1, U = 2 <br />
 </p><table class="doxtable">
<tr>
<th align="center">Pin </th><th align="center">Ternary </th><th align="center">Decimal </th><th align="center">Address  </th></tr>
<tr>
<td align="center">GGG </td><td align="center">000 </td><td align="center">0 </td><td align="center">0x70 </td></tr>
<tr>
<td align="center">GGP </td><td align="center">001 </td><td align="center">1 </td><td align="center">0x8A </td></tr>
<tr>
<td align="center">GGU </td><td align="center">002 </td><td align="center">2 </td><td align="center">0x72 </td></tr>
<tr>
<td align="center">GPG </td><td align="center">010 </td><td align="center">3 </td><td align="center">0x8E </td></tr>
<tr>
<td align="center">GPP </td><td align="center">011 </td><td align="center">4 </td><td align="center">0x92 </td></tr>
<tr>
<td align="center">GPU </td><td align="center">012 </td><td align="center">5 </td><td align="center">0x90 </td></tr>
<tr>
<td align="center">GUG </td><td align="center">020 </td><td align="center">6 </td><td align="center">0x74 </td></tr>
<tr>
<td align="center">GUP </td><td align="center">021 </td><td align="center">7 </td><td align="center">0x8C </td></tr>
<tr>
<td align="center">GUU </td><td align="center">022 </td><td align="center">8 </td><td align="center">0x76 </td></tr>
<tr>
<td align="center">PGG </td><td align="center">100 </td><td align="center">9 </td><td align="center">0x98 </td></tr>
<tr>
<td align="center">PGP </td><td align="center">101 </td><td align="center">10 </td><td align="center">0x9C </td></tr>
<tr>
<td align="center">PGU </td><td align="center">102 </td><td align="center">11 </td><td align="center">0x9A </td></tr>
<tr>
<td align="center">PPG </td><td align="center">110 </td><td align="center">12 </td><td align="center">0xA0 </td></tr>
<tr>
<td align="center">PPP </td><td align="center">111 </td><td align="center">13 </td><td align="center">0xA4 </td></tr>
<tr>
<td align="center">PPU </td><td align="center">112 </td><td align="center">14 </td><td align="center">0x88 </td></tr>
<tr>
<td align="center">PUG </td><td align="center">120 </td><td align="center">15 </td><td align="center">0x9E </td></tr>
<tr>
<td align="center">PUP </td><td align="center">121 </td><td align="center">16 </td><td align="center">0x86 </td></tr>
<tr>
<td align="center">PUU </td><td align="center">122 </td><td align="center">17 </td><td align="center">0x84 </td></tr>
<tr>
<td align="center">UGG </td><td align="center">200 </td><td align="center">18 </td><td align="center">0x78 </td></tr>
<tr>
<td align="center">UGP </td><td align="center">201 </td><td align="center">19 </td><td align="center">0x94 </td></tr>
<tr>
<td align="center">UGU </td><td align="center">202 </td><td align="center">20 </td><td align="center">0x7A </td></tr>
<tr>
<td align="center">UPG </td><td align="center">210 </td><td align="center">21 </td><td align="center">0x96 </td></tr>
<tr>
<td align="center">UPP </td><td align="center">211 </td><td align="center">22 </td><td align="center">0x82 </td></tr>
<tr>
<td align="center">UPU </td><td align="center">212 </td><td align="center">23 </td><td align="center">0x80 </td></tr>
<tr>
<td align="center">UUG </td><td align="center">220 </td><td align="center">24 </td><td align="center">0x7C </td></tr>
<tr>
<td align="center">UUP </td><td align="center">221 </td><td align="center">25 </td><td align="center">0x7E </td></tr>
<tr>
<td align="center">UUU </td><td align="center">222 </td><td align="center">26 </td><td align="center">0xA2 </td></tr>
</table>
<dl class="section return"><dt>Returns</dt><dd>7-bit Slave Address </dd></dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a827d381e680cc9981d98b35fcef482b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a827d381e680cc9981d98b35fcef482b6">&#9670;&nbsp;</a></span>IPMBL_TABLE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const unsigned char IPMBL_TABLE[<a class="el" href="ipmb_8h.html#a85cd4d157a04ad1efedfec4106a1fcac">IPMBL_TABLE_SIZE</a>]</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">    0x70, 0x8A, 0x72, 0x8E, 0x92, 0x90, 0x74, 0x8C, 0x76,</div><div class="line">    0x98, 0x9C, 0x9A, 0xA0, 0xA4, 0x88, 0x9E, 0x86, 0x84,</div><div class="line">    0x78, 0x94, 0x7A, 0x96, 0x82, 0x80, 0x7C, 0x7E, 0xA2 }</div></div><!-- fragment -->
<p>Table holding all possible address values in IPMB specification. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="board__ipmb_8c.html#a1c987a2dc56422b57146391280f5e796" title="Reads own I2C slave address using GA pins. ">get_ipmb_addr()</a> </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_651562d8bf6cfd3e81eff5b570d7df50.html">port</a></li><li class="navelem"><a class="el" href="dir_720c383d1c1dd9726076c20ae4044698.html">board</a></li><li class="navelem"><a class="el" href="dir_b05ff2a91f5204d7aa67cb6d8a63d567.html">afc-common</a></li><li class="navelem"><a class="el" href="board__ipmb_8c.html">board_ipmb.c</a></li>
    <li class="footer">Generated on Fri Jun 11 2021 18:45:52 for openMMC by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
