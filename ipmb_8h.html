<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>openMMC: modules/ipmb.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">openMMC
   </div>
   <div id="projectbrief">Open Source Modular MMC for AMCs</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('ipmb_8h.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">ipmb.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Definitions used in IPMB Layer.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;FreeRTOS.h&quot;</code><br />
<code>#include &quot;task.h&quot;</code><br />
<code>#include &quot;queue.h&quot;</code><br />
<code>#include &quot;semphr.h&quot;</code><br />
<code>#include &quot;<a class="el" href="board__ipmb_8h_source.html">board_ipmb.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for ipmb.h:</div>
<div class="dyncontent">
<div class="center"><img src="ipmb_8h__incl.png" border="0" usemap="#modules_2ipmb_8h" alt=""/></div>
<map name="modules_2ipmb_8h" id="modules_2ipmb_8h">
<area shape="rect" id="node6" href="board__ipmb_8h.html" title="Board specific definitions used in IPMB Layer. " alt="" coords="417,80,528,107"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="ipmb_8h__dep__incl.png" border="0" usemap="#modules_2ipmb_8hdep" alt=""/></div>
<map name="modules_2ipmb_8hdep" id="modules_2ipmb_8hdep">
<area shape="rect" id="node2" href="sdr_8h.html" title="modules/sdr.h" alt="" coords="1327,87,1440,114"/>
<area shape="rect" id="node13" href="ipmi_8h.html" title="IPMI module definitions. " alt="" coords="3226,177,3349,203"/>
<area shape="rect" id="node25" href="ipmb_8c.html" title="modules/ipmb.c" alt="" coords="4872,266,4999,293"/>
<area shape="rect" id="node50" href="board__ipmb_8c.html" title="port/board/afc&#45;common\l/board_ipmb.c" alt="" coords="3424,80,3599,121"/>
<area shape="rect" id="node3" href="fpga__spi_8h.html" title="modules/fpga_spi.h" alt="" coords="698,177,847,203"/>
<area shape="rect" id="node4" href="fpga__spi_8c.html" title="modules/fpga_spi.c" alt="" coords="188,266,336,293"/>
<area shape="rect" id="node6" href="sdr_8c.html" title="modules/sdr.c" alt="" coords="1323,266,1435,293"/>
<area shape="rect" id="node7" href="ina220_8c.html" title="INA220 interface implementation. " alt="" coords="360,266,551,293"/>
<area shape="rect" id="node8" href="ina3221_8c.html" title="INA3221 interface implementation. " alt="" coords="575,266,773,293"/>
<area shape="rect" id="node9" href="afc-bpm_2v3__1_2sdr__list_8c.html" title="port/board/afc&#45;bpm\l/v3_1/sdr_list.c" alt="" coords="798,259,945,300"/>
<area shape="rect" id="node10" href="afc-fofb-ctrl_2v3__1_2sdr__list_8c.html" title="port/board/afc&#45;fofb\l&#45;ctrl/v3_1/sdr_list.c" alt="" coords="969,259,1115,300"/>
<area shape="rect" id="node11" href="afc-timing_2sdr__list_8c.html" title="port/board/afc&#45;timing\l/sdr_list.c" alt="" coords="1139,259,1299,300"/>
<area shape="rect" id="node12" href="afc-v4_2sdr__list_8c.html" title="port/board/afc&#45;v4/sdr\l_list.c" alt="" coords="5,259,164,300"/>
<area shape="rect" id="node28" href="rtm_8c.html" title="modules/rtm.c" alt="" coords="1611,266,1727,293"/>
<area shape="rect" id="node29" href="hotswap_8c.html" title="Hotswap sensors implementation. " alt="" coords="1925,266,2127,293"/>
<area shape="rect" id="node43" href="hotswap_8h.html" title="Hotswap sensors definitions. " alt="" coords="2127,177,2330,203"/>
<area shape="rect" id="node46" href="lm75_8c.html" title="Interface functions for LM75 I2C Temperature Sensor. " alt="" coords="973,177,1153,203"/>
<area shape="rect" id="node47" href="max6642_8c.html" title="MAX6642 I2C Temperature Sensor Interface implementation. " alt="" coords="1178,177,1386,203"/>
<area shape="rect" id="node48" href="rtm-8sfp_2sdr__list_8c.html" title="port/board/rtm&#45;8sfp\l/sdr_list.c" alt="" coords="1410,169,1559,211"/>
<area shape="rect" id="node49" href="rtm-lamp_2sdr__list_8c.html" title="port/board/rtm&#45;lamp\l/sdr_list.c" alt="" coords="1583,169,1738,211"/>
<area shape="rect" id="node5" href="main_8c.html" title="modules/main.c" alt="" coords="1460,266,1587,293"/>
<area shape="rect" id="node14" href="fru__editor_8h.html" title="modules/fru_editor.h" alt="" coords="3325,266,3481,293"/>
<area shape="rect" id="node15" href="fru_8c.html" title="modules/fru.c" alt="" coords="2501,355,2612,382"/>
<area shape="rect" id="node24" href="hpm_8c.html" title="modules/hpm.c" alt="" coords="3506,266,3629,293"/>
<area shape="rect" id="node26" href="ipmi_8c.html" title="IPMI module implementation. " alt="" coords="3653,266,3775,293"/>
<area shape="rect" id="node27" href="led_8c.html" title="modules/led.c" alt="" coords="3800,266,3913,293"/>
<area shape="rect" id="node30" href="afc-bpm_2v3__1_2ipmi__oem_8h.html" title="Custom IPMI commands for AFC. " alt="" coords="3938,259,4085,300"/>
<area shape="rect" id="node32" href="afc-bpm_2v3__1_2payload_8c.html" title="port/board/afc&#45;bpm\l/v3_1/payload.c" alt="" coords="2917,259,3063,300"/>
<area shape="rect" id="node33" href="board__led_8c.html" title="port/board/afc&#45;common\l/board_led.c" alt="" coords="4109,259,4284,300"/>
<area shape="rect" id="node34" href="afc-fofb-ctrl_2v3__1_2ipmi__oem_8h.html" title="Custom IPMI commands for AFC FOFB CTRL. " alt="" coords="4308,259,4472,300"/>
<area shape="rect" id="node36" href="afc-fofb-ctrl_2v3__1_2payload_8c.html" title="port/board/afc&#45;fofb\l&#45;ctrl/v3_1/payload.c" alt="" coords="2331,259,2481,300"/>
<area shape="rect" id="node37" href="afc-timing_2ipmi__oem_8h.html" title="Custom IPMI commands for AFC Timing. " alt="" coords="4497,259,4657,300"/>
<area shape="rect" id="node39" href="afc-timing_2payload_8c.html" title="port/board/afc&#45;timing\l/payload.c" alt="" coords="2506,259,2666,300"/>
<area shape="rect" id="node40" href="afc-v4_2ipmi__oem_8h.html" title="Custom IPMI commands for AFC. " alt="" coords="4681,259,4848,300"/>
<area shape="rect" id="node41" href="afc-v4_2payload_8c.html" title="port/board/afc&#45;v4/payload.c" alt="" coords="2691,266,2892,293"/>
<area shape="rect" id="node42" href="lpc17__hpm_8c.html" title="Firmware update functions (HPM.1) " alt="" coords="3087,259,3250,300"/>
<area shape="rect" id="node16" href="fru__editor_8c.html" title="modules/fru_editor.c" alt="" coords="3959,355,4114,382"/>
<area shape="rect" id="node17" href="afc-bpm_2v3__1_2user__amc__fru_8h.html" title="port/board/afc&#45;bpm\l/v3_1/user_amc_fru.h" alt="" coords="2636,348,2797,389"/>
<area shape="rect" id="node18" href="board__fru_8c.html" title="port/board/afc&#45;common\l/board_fru.c" alt="" coords="2821,348,2996,389"/>
<area shape="rect" id="node19" href="afc-fofb-ctrl_2v3__1_2user__amc__fru_8h.html" title="port/board/afc&#45;fofb\l&#45;ctrl/v3_1/user_amc_fru.h" alt="" coords="3021,348,3207,389"/>
<area shape="rect" id="node20" href="afc-timing_2user__amc__fru_8h.html" title="port/board/afc&#45;timing\l/user_amc_fru.h" alt="" coords="3231,348,3391,389"/>
<area shape="rect" id="node21" href="afc-v4_2user__amc__fru_8h.html" title="port/board/afc&#45;v4/user\l_amc_fru.h" alt="" coords="3416,348,3583,389"/>
<area shape="rect" id="node22" href="rtm-8sfp_2rtm__user__fru_8h.html" title="port/board/rtm&#45;8sfp\l/rtm_user_fru.h" alt="" coords="3607,348,3757,389"/>
<area shape="rect" id="node23" href="rtm-lamp_2rtm__user__fru_8h.html" title="port/board/rtm&#45;lamp\l/rtm_user_fru.h" alt="" coords="3781,348,3935,389"/>
<area shape="rect" id="node31" href="afc-bpm_2v3__1_2ipmi__oem_8c.html" title="port/board/afc&#45;bpm\l/v3_1/ipmi_oem.c" alt="" coords="4138,348,4285,389"/>
<area shape="rect" id="node35" href="afc-fofb-ctrl_2v3__1_2ipmi__oem_8c.html" title="port/board/afc&#45;fofb\l&#45;ctrl/v3_1/ipmi_oem.c" alt="" coords="4309,348,4471,389"/>
<area shape="rect" id="node38" href="afc-timing_2ipmi__oem_8c.html" title="port/board/afc&#45;timing\l/ipmi_oem.c" alt="" coords="4497,348,4657,389"/>
<area shape="rect" id="node44" href="rtm-8sfp_2rtm__user_8c.html" title="port/board/rtm&#45;8sfp\l/rtm_user.c" alt="" coords="1751,259,1901,300"/>
<area shape="rect" id="node45" href="rtm-lamp_2rtm__user_8c.html" title="port/board/rtm&#45;lamp\l/rtm_user.c" alt="" coords="2151,259,2306,300"/>
</map>
</div>
</div>
<p><a href="ipmb_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structipmi__msg.html">ipmi_msg</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">IPMI message struct.  <a href="structipmi__msg.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structipmi__msg__cfg.html">ipmi_msg_cfg</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">IPMI message configuration struct.  <a href="structipmi__msg__cfg.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ae05360323706e4b04fdefa8940ba49f1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ipmb_8h.html#ae05360323706e4b04fdefa8940ba49f1">IPMB_TXQUEUE_LEN</a>&#160;&#160;&#160;10</td></tr>
<tr class="memdesc:ae05360323706e4b04fdefa8940ba49f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum count of messages to be sent.  <a href="#ae05360323706e4b04fdefa8940ba49f1">More...</a><br /></td></tr>
<tr class="separator:ae05360323706e4b04fdefa8940ba49f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76f3c64e1b2e71e7d78672424fb1c999"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ipmb_8h.html#a76f3c64e1b2e71e7d78672424fb1c999">IPMB_CLIENT_QUEUE_LEN</a>&#160;&#160;&#160;10</td></tr>
<tr class="memdesc:a76f3c64e1b2e71e7d78672424fb1c999"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum count of received messages to be delivered to client task.  <a href="#a76f3c64e1b2e71e7d78672424fb1c999">More...</a><br /></td></tr>
<tr class="separator:a76f3c64e1b2e71e7d78672424fb1c999"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5546e89aff8048ba1e566aaaed175c27"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ipmb_8h.html#a5546e89aff8048ba1e566aaaed175c27">IPMB_MAX_RETRIES</a>&#160;&#160;&#160;3</td></tr>
<tr class="memdesc:a5546e89aff8048ba1e566aaaed175c27"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum retries made by IPMB TX Task when sending a message.  <a href="#a5546e89aff8048ba1e566aaaed175c27">More...</a><br /></td></tr>
<tr class="separator:a5546e89aff8048ba1e566aaaed175c27"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb061c5466ba5d2d8c7bb47f74ff137b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ipmb_8h.html#adb061c5466ba5d2d8c7bb47f74ff137b">IPMB_MSG_TIMEOUT</a>&#160;&#160;&#160;250/portTICK_PERIOD_MS</td></tr>
<tr class="memdesc:adb061c5466ba5d2d8c7bb47f74ff137b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Timeout limit between the end of a request and start of a response (defined in IPMB timing specifications)  <a href="#adb061c5466ba5d2d8c7bb47f74ff137b">More...</a><br /></td></tr>
<tr class="separator:adb061c5466ba5d2d8c7bb47f74ff137b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7219ff5cd3c13052d4d4a890f680527f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ipmb_8h.html#a7219ff5cd3c13052d4d4a890f680527f">CLIENT_NOTIFY_TIMEOUT</a>&#160;&#160;&#160;5</td></tr>
<tr class="memdesc:a7219ff5cd3c13052d4d4a890f680527f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Timeout limit waiting a free space in client queue to put a received message.  <a href="#a7219ff5cd3c13052d4d4a890f680527f">More...</a><br /></td></tr>
<tr class="separator:a7219ff5cd3c13052d4d4a890f680527f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca6a53d56ec8961b4e336c23cbf38df5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ipmb_8h.html#aca6a53d56ec8961b4e336c23cbf38df5">IPMI_HEADER_CHECKSUM_POSITION</a>&#160;&#160;&#160;2</td></tr>
<tr class="memdesc:aca6a53d56ec8961b4e336c23cbf38df5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Position of Header cheksum byte in a IPMI message.  <a href="#aca6a53d56ec8961b4e336c23cbf38df5">More...</a><br /></td></tr>
<tr class="separator:aca6a53d56ec8961b4e336c23cbf38df5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e082d155fb84055bdbec5d79c79ae40"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ipmb_8h.html#a8e082d155fb84055bdbec5d79c79ae40">IPMI_MSG_MAX_LENGTH</a>&#160;&#160;&#160;32</td></tr>
<tr class="memdesc:a8e082d155fb84055bdbec5d79c79ae40"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum length in bytes of a IPMI message (including connection header)  <a href="#a8e082d155fb84055bdbec5d79c79ae40">More...</a><br /></td></tr>
<tr class="separator:a8e082d155fb84055bdbec5d79c79ae40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49fb1b6d6f57beaa66981cf066eb1b2d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ipmb_8h.html#a49fb1b6d6f57beaa66981cf066eb1b2d">IPMB_REQ_HEADER_LENGTH</a>&#160;&#160;&#160;6</td></tr>
<tr class="memdesc:a49fb1b6d6f57beaa66981cf066eb1b2d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Length of connection header in a request.  <a href="#a49fb1b6d6f57beaa66981cf066eb1b2d">More...</a><br /></td></tr>
<tr class="separator:a49fb1b6d6f57beaa66981cf066eb1b2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9451b52c17643be63161df8d0b2b1a06"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ipmb_8h.html#a9451b52c17643be63161df8d0b2b1a06">IPMB_RESP_HEADER_LENGTH</a>&#160;&#160;&#160;7</td></tr>
<tr class="memdesc:a9451b52c17643be63161df8d0b2b1a06"><td class="mdescLeft">&#160;</td><td class="mdescRight">Length of connection header in a response.  <a href="#a9451b52c17643be63161df8d0b2b1a06">More...</a><br /></td></tr>
<tr class="separator:a9451b52c17643be63161df8d0b2b1a06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38546674ce3ba08ae07cb1ef494e7bf5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ipmb_8h.html#a38546674ce3ba08ae07cb1ef494e7bf5">IPMB_NETFN_MASK</a>&#160;&#160;&#160;0xFC</td></tr>
<tr class="separator:a38546674ce3ba08ae07cb1ef494e7bf5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af71080dafa1f17e2cc8852586b5b4324"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ipmb_8h.html#af71080dafa1f17e2cc8852586b5b4324">IPMB_DEST_LUN_MASK</a>&#160;&#160;&#160;0x03</td></tr>
<tr class="separator:af71080dafa1f17e2cc8852586b5b4324"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d420836088f47d5c3a69bb673f9a1f4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ipmb_8h.html#a0d420836088f47d5c3a69bb673f9a1f4">IPMB_SEQ_MASK</a>&#160;&#160;&#160;0xFC</td></tr>
<tr class="separator:a0d420836088f47d5c3a69bb673f9a1f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5488a081780af7f67914ce73eb3307b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ipmb_8h.html#aa5488a081780af7f67914ce73eb3307b">IPMB_SRC_LUN_MASK</a>&#160;&#160;&#160;0x03</td></tr>
<tr class="separator:aa5488a081780af7f67914ce73eb3307b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afaf7373cd5c78bcaaf4c28d542cf0301"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ipmb_8h.html#afaf7373cd5c78bcaaf4c28d542cf0301">MCH_ADDRESS</a>&#160;&#160;&#160;0x20</td></tr>
<tr class="memdesc:afaf7373cd5c78bcaaf4c28d542cf0301"><td class="mdescLeft">&#160;</td><td class="mdescRight">MicroTCA's MCH slave address.  <a href="#afaf7373cd5c78bcaaf4c28d542cf0301">More...</a><br /></td></tr>
<tr class="separator:afaf7373cd5c78bcaaf4c28d542cf0301"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8545d3dbb61b93b24534c4fdb12c22a1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ipmb_8h.html#a8545d3dbb61b93b24534c4fdb12c22a1">IS_RESPONSE</a>(msg)&#160;&#160;&#160;(msg.netfn &amp; 0x01)</td></tr>
<tr class="memdesc:a8545d3dbb61b93b24534c4fdb12c22a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Macro to check is the message is a response (odd netfn)  <a href="#a8545d3dbb61b93b24534c4fdb12c22a1">More...</a><br /></td></tr>
<tr class="separator:a8545d3dbb61b93b24534c4fdb12c22a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85cd4d157a04ad1efedfec4106a1fcac"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ipmb_8h.html#a85cd4d157a04ad1efedfec4106a1fcac">IPMBL_TABLE_SIZE</a>&#160;&#160;&#160;27</td></tr>
<tr class="memdesc:a85cd4d157a04ad1efedfec4106a1fcac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Size of <a class="el" href="board__ipmb_8c.html#a827d381e680cc9981d98b35fcef482b6" title="Table holding all possible address values in IPMB specification. ">IPMBL_TABLE</a>.  <a href="#a85cd4d157a04ad1efedfec4106a1fcac">More...</a><br /></td></tr>
<tr class="separator:a85cd4d157a04ad1efedfec4106a1fcac"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a86681fd98135f77e4f734aa2e10a7b44"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structipmi__msg.html">ipmi_msg</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ipmb_8h.html#a86681fd98135f77e4f734aa2e10a7b44">ipmi_msg</a></td></tr>
<tr class="memdesc:a86681fd98135f77e4f734aa2e10a7b44"><td class="mdescLeft">&#160;</td><td class="mdescRight">IPMI message struct.  <a href="#a86681fd98135f77e4f734aa2e10a7b44">More...</a><br /></td></tr>
<tr class="separator:a86681fd98135f77e4f734aa2e10a7b44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27f8e7ec6001ddd7a5198ea85ed9353a"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structipmi__msg__cfg.html">ipmi_msg_cfg</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ipmb_8h.html#a27f8e7ec6001ddd7a5198ea85ed9353a">ipmi_msg_cfg</a></td></tr>
<tr class="memdesc:a27f8e7ec6001ddd7a5198ea85ed9353a"><td class="mdescLeft">&#160;</td><td class="mdescRight">IPMI message configuration struct.  <a href="#a27f8e7ec6001ddd7a5198ea85ed9353a">More...</a><br /></td></tr>
<tr class="separator:a27f8e7ec6001ddd7a5198ea85ed9353a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1eb9f5f7f1857b588916fc76996942b"><td class="memItemLeft" align="right" valign="top">typedef enum <a class="el" href="ipmb_8h.html#a8d757edf82d973e9e19ea700b3cd0671">ipmb_error</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ipmb_8h.html#ae1eb9f5f7f1857b588916fc76996942b">ipmb_error</a></td></tr>
<tr class="memdesc:ae1eb9f5f7f1857b588916fc76996942b"><td class="mdescLeft">&#160;</td><td class="mdescRight">IPMB errors enumeration.  <a href="#ae1eb9f5f7f1857b588916fc76996942b">More...</a><br /></td></tr>
<tr class="separator:ae1eb9f5f7f1857b588916fc76996942b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:acafd4fe8d7a215008eff9894312bd75c"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ipmb_8h.html#acafd4fe8d7a215008eff9894312bd75c">GA_Pin_state</a> { <a class="el" href="ipmb_8h.html#acafd4fe8d7a215008eff9894312bd75caefa0f3ce09b7d810dde1e3cde60f7c4f">GROUNDED</a> = 0, 
<a class="el" href="ipmb_8h.html#acafd4fe8d7a215008eff9894312bd75ca40a9c795a3506e39806bbf31ead86255">POWERED</a>, 
<a class="el" href="ipmb_8h.html#acafd4fe8d7a215008eff9894312bd75ca29d18c1b3b6b68b4d20daf998bbd5c29">UNCONNECTED</a>
 }<tr class="memdesc:acafd4fe8d7a215008eff9894312bd75c"><td class="mdescLeft">&#160;</td><td class="mdescRight">GA pins definition.  <a href="ipmb_8h.html#acafd4fe8d7a215008eff9894312bd75c">More...</a><br /></td></tr>
</td></tr>
<tr class="separator:acafd4fe8d7a215008eff9894312bd75c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d757edf82d973e9e19ea700b3cd0671"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ipmb_8h.html#a8d757edf82d973e9e19ea700b3cd0671">ipmb_error</a> { <br />
&#160;&#160;<a class="el" href="ipmb_8h.html#a8d757edf82d973e9e19ea700b3cd0671a357ace124ebe07e1ffaa75f34535ec4b">ipmb_error_unknown</a> = 0, 
<a class="el" href="ipmb_8h.html#a8d757edf82d973e9e19ea700b3cd0671a9d8c377c0e97640f2402d7b4a3c80360">ipmb_error_success</a>, 
<a class="el" href="ipmb_8h.html#a8d757edf82d973e9e19ea700b3cd0671ad37cbd724cd0363e4a98348d8665496f">ipmb_error_failure</a>, 
<a class="el" href="ipmb_8h.html#a8d757edf82d973e9e19ea700b3cd0671a066b08561fe5c5c4d16d8ccecfe59276">ipmb_error_timeout</a>, 
<br />
&#160;&#160;<a class="el" href="ipmb_8h.html#a8d757edf82d973e9e19ea700b3cd0671a33b6833f21b14101de644ad63906956e">ipmb_error_invalid_req</a>, 
<a class="el" href="ipmb_8h.html#a8d757edf82d973e9e19ea700b3cd0671ac8e79b338f1d2fff50e6a98513d0cee1">ipmb_error_hdr_chksum</a>, 
<a class="el" href="ipmb_8h.html#a8d757edf82d973e9e19ea700b3cd0671acc3b44cea72a6950d91d71c20e74ac88">ipmb_error_msg_chksum</a>, 
<a class="el" href="ipmb_8h.html#a8d757edf82d973e9e19ea700b3cd0671a3ba59e89b5a3d7a347ec1c82e2347d91">ipmb_error_queue_creation</a>
<br />
 }<tr class="memdesc:a8d757edf82d973e9e19ea700b3cd0671"><td class="mdescLeft">&#160;</td><td class="mdescRight">IPMB errors enumeration.  <a href="ipmb_8h.html#a8d757edf82d973e9e19ea700b3cd0671">More...</a><br /></td></tr>
</td></tr>
<tr class="separator:a8d757edf82d973e9e19ea700b3cd0671"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a9da7268a374df3d8c20ec76bf5ae2a3a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ipmb_8h.html#a9da7268a374df3d8c20ec76bf5ae2a3a">IPMB_TXTask</a> (void *pvParameters)</td></tr>
<tr class="memdesc:a9da7268a374df3d8c20ec76bf5ae2a3a"><td class="mdescLeft">&#160;</td><td class="mdescRight">IPMB Transmitter Task.  <a href="#a9da7268a374df3d8c20ec76bf5ae2a3a">More...</a><br /></td></tr>
<tr class="separator:a9da7268a374df3d8c20ec76bf5ae2a3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f3f27f298ef3643964b4085f905c031"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ipmb_8h.html#a5f3f27f298ef3643964b4085f905c031">IPMB_RXTask</a> (void *pvParameters)</td></tr>
<tr class="memdesc:a5f3f27f298ef3643964b4085f905c031"><td class="mdescLeft">&#160;</td><td class="mdescRight">IPMB Receiver Task.  <a href="#a5f3f27f298ef3643964b4085f905c031">More...</a><br /></td></tr>
<tr class="separator:a5f3f27f298ef3643964b4085f905c031"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09d71f7adbd01a149b3778052c402b1d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ipmb_8h.html#a09d71f7adbd01a149b3778052c402b1d">ipmb_init</a> (void)</td></tr>
<tr class="memdesc:a09d71f7adbd01a149b3778052c402b1d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the IPMB Layer.  <a href="#a09d71f7adbd01a149b3778052c402b1d">More...</a><br /></td></tr>
<tr class="separator:a09d71f7adbd01a149b3778052c402b1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab33457f43ce9d42f9335c94568bcee90"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ipmb_8h.html#a8d757edf82d973e9e19ea700b3cd0671">ipmb_error</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ipmb_8h.html#ab33457f43ce9d42f9335c94568bcee90">ipmb_send_request</a> (<a class="el" href="structipmi__msg.html">ipmi_msg</a> *req)</td></tr>
<tr class="memdesc:ab33457f43ce9d42f9335c94568bcee90"><td class="mdescLeft">&#160;</td><td class="mdescRight">Format and send a request via IPMB channel.  <a href="#ab33457f43ce9d42f9335c94568bcee90">More...</a><br /></td></tr>
<tr class="separator:ab33457f43ce9d42f9335c94568bcee90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0769acd22719fe34c97c1961c91ba26"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ipmb_8h.html#a8d757edf82d973e9e19ea700b3cd0671">ipmb_error</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ipmb_8h.html#ac0769acd22719fe34c97c1961c91ba26">ipmb_send_response</a> (<a class="el" href="structipmi__msg.html">ipmi_msg</a> *req, <a class="el" href="structipmi__msg.html">ipmi_msg</a> *resp)</td></tr>
<tr class="memdesc:ac0769acd22719fe34c97c1961c91ba26"><td class="mdescLeft">&#160;</td><td class="mdescRight">Format and send a response via IPMB channel.  <a href="#ac0769acd22719fe34c97c1961c91ba26">More...</a><br /></td></tr>
<tr class="separator:ac0769acd22719fe34c97c1961c91ba26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a027dc1f6ba3d5176fb46bade2c7afd88"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ipmb_8h.html#a8d757edf82d973e9e19ea700b3cd0671">ipmb_error</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ipmb_8h.html#a027dc1f6ba3d5176fb46bade2c7afd88">ipmb_register_rxqueue</a> (QueueHandle_t *queue)</td></tr>
<tr class="memdesc:a027dc1f6ba3d5176fb46bade2c7afd88"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates and returns a queue in which the client can block to receive the incoming requests.  <a href="#a027dc1f6ba3d5176fb46bade2c7afd88">More...</a><br /></td></tr>
<tr class="separator:a027dc1f6ba3d5176fb46bade2c7afd88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f65cfe781d852b8d1394830ad0ec739"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ipmb_8h.html#a8d757edf82d973e9e19ea700b3cd0671">ipmb_error</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ipmb_8h.html#a2f65cfe781d852b8d1394830ad0ec739">ipmb_assert_chksum</a> (uint8_t *buffer, uint8_t buffer_len)</td></tr>
<tr class="memdesc:a2f65cfe781d852b8d1394830ad0ec739"><td class="mdescLeft">&#160;</td><td class="mdescRight">Asserts the input message checksums by comparing them with our calculated ones.  <a href="#a2f65cfe781d852b8d1394830ad0ec739">More...</a><br /></td></tr>
<tr class="separator:a2f65cfe781d852b8d1394830ad0ec739"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c987a2dc56422b57146391280f5e796"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ipmb_8h.html#a1c987a2dc56422b57146391280f5e796">get_ipmb_addr</a> (void)</td></tr>
<tr class="memdesc:a1c987a2dc56422b57146391280f5e796"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads own I2C slave address using GA pins.  <a href="#a1c987a2dc56422b57146391280f5e796">More...</a><br /></td></tr>
<tr class="separator:a1c987a2dc56422b57146391280f5e796"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ad8fcfee4697fe45151d15d0caed4201f"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ipmb_8h.html#ad8fcfee4697fe45151d15d0caed4201f">ipmb_addr</a></td></tr>
<tr class="memdesc:ad8fcfee4697fe45151d15d0caed4201f"><td class="mdescLeft">&#160;</td><td class="mdescRight">AMC IPMB Address.  <a href="#ad8fcfee4697fe45151d15d0caed4201f">More...</a><br /></td></tr>
<tr class="separator:ad8fcfee4697fe45151d15d0caed4201f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Definitions used in IPMB Layer. </p>
<dl class="section author"><dt>Author</dt><dd>Henrique Silva <a href="#" onclick="location.href='mai'+'lto:'+'hen'+'ri'+'que'+'.s'+'ilv'+'a@'+'lnl'+'s.'+'br'; return false;">henri<span style="display: none;">.nosp@m.</span>que.<span style="display: none;">.nosp@m.</span>silva<span style="display: none;">.nosp@m.</span>@lnl<span style="display: none;">.nosp@m.</span>s.br</a>, LNLS </dd></dl>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a7219ff5cd3c13052d4d4a890f680527f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7219ff5cd3c13052d4d4a890f680527f">&#9670;&nbsp;</a></span>CLIENT_NOTIFY_TIMEOUT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CLIENT_NOTIFY_TIMEOUT&#160;&#160;&#160;5</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Timeout limit waiting a free space in client queue to put a received message. </p>

</div>
</div>
<a id="a76f3c64e1b2e71e7d78672424fb1c999"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a76f3c64e1b2e71e7d78672424fb1c999">&#9670;&nbsp;</a></span>IPMB_CLIENT_QUEUE_LEN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IPMB_CLIENT_QUEUE_LEN&#160;&#160;&#160;10</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Maximum count of received messages to be delivered to client task. </p>

</div>
</div>
<a id="af71080dafa1f17e2cc8852586b5b4324"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af71080dafa1f17e2cc8852586b5b4324">&#9670;&nbsp;</a></span>IPMB_DEST_LUN_MASK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IPMB_DEST_LUN_MASK&#160;&#160;&#160;0x03</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a5546e89aff8048ba1e566aaaed175c27"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5546e89aff8048ba1e566aaaed175c27">&#9670;&nbsp;</a></span>IPMB_MAX_RETRIES</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IPMB_MAX_RETRIES&#160;&#160;&#160;3</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Maximum retries made by IPMB TX Task when sending a message. </p>

</div>
</div>
<a id="adb061c5466ba5d2d8c7bb47f74ff137b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb061c5466ba5d2d8c7bb47f74ff137b">&#9670;&nbsp;</a></span>IPMB_MSG_TIMEOUT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IPMB_MSG_TIMEOUT&#160;&#160;&#160;250/portTICK_PERIOD_MS</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Timeout limit between the end of a request and start of a response (defined in IPMB timing specifications) </p>

</div>
</div>
<a id="a38546674ce3ba08ae07cb1ef494e7bf5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a38546674ce3ba08ae07cb1ef494e7bf5">&#9670;&nbsp;</a></span>IPMB_NETFN_MASK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IPMB_NETFN_MASK&#160;&#160;&#160;0xFC</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a49fb1b6d6f57beaa66981cf066eb1b2d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a49fb1b6d6f57beaa66981cf066eb1b2d">&#9670;&nbsp;</a></span>IPMB_REQ_HEADER_LENGTH</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IPMB_REQ_HEADER_LENGTH&#160;&#160;&#160;6</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Length of connection header in a request. </p>
<p>The connection header in a request is made by:</p><ul>
<li>rsSA -&gt; Destination Address</li>
<li>NetFN:6 rsLUN:2 -&gt; Net function and dest LUN</li>
<li>HeaderChecksum -&gt; 2's complement of the sum of preceding bytes</li>
<li>rqSA -&gt; Source address</li>
<li>rqSeq:6 rqLUN:2 -&gt; Sequence Number and source LUN</li>
<li>CMD -&gt; Command</li>
<li>Messagechecksum -&gt; 2's complement of the sum of preceding bytes </li>
</ul>

</div>
</div>
<a id="a9451b52c17643be63161df8d0b2b1a06"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9451b52c17643be63161df8d0b2b1a06">&#9670;&nbsp;</a></span>IPMB_RESP_HEADER_LENGTH</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IPMB_RESP_HEADER_LENGTH&#160;&#160;&#160;7</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Length of connection header in a response. </p>
<p>The connection header in a response is made by:</p><ul>
<li>rqSA -&gt; Destination Address</li>
<li>NetFN:6 rqLUN:2 -&gt; Net function and dest LUN</li>
<li>HeaderChecksum -&gt; 2's complement of the sum of preceding bytes</li>
<li>rsSA -&gt; Source address</li>
<li>rqSeq:6 rsLUN:2 -&gt; Sequence Number and source LUN</li>
<li>CMD -&gt; Command</li>
<li>CC -&gt; Completion Code</li>
<li>Messagechecksum -&gt; 2's complement of the sum of preceding bytes <dl class="section note"><dt>Note</dt><dd>Response header is 1 byte longer than request's because it must include the completion code </dd></dl>
</li>
</ul>

</div>
</div>
<a id="a0d420836088f47d5c3a69bb673f9a1f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d420836088f47d5c3a69bb673f9a1f4">&#9670;&nbsp;</a></span>IPMB_SEQ_MASK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IPMB_SEQ_MASK&#160;&#160;&#160;0xFC</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aa5488a081780af7f67914ce73eb3307b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa5488a081780af7f67914ce73eb3307b">&#9670;&nbsp;</a></span>IPMB_SRC_LUN_MASK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IPMB_SRC_LUN_MASK&#160;&#160;&#160;0x03</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ae05360323706e4b04fdefa8940ba49f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae05360323706e4b04fdefa8940ba49f1">&#9670;&nbsp;</a></span>IPMB_TXQUEUE_LEN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IPMB_TXQUEUE_LEN&#160;&#160;&#160;10</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Maximum count of messages to be sent. </p>

</div>
</div>
<a id="a85cd4d157a04ad1efedfec4106a1fcac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a85cd4d157a04ad1efedfec4106a1fcac">&#9670;&nbsp;</a></span>IPMBL_TABLE_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IPMBL_TABLE_SIZE&#160;&#160;&#160;27</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Size of <a class="el" href="board__ipmb_8c.html#a827d381e680cc9981d98b35fcef482b6" title="Table holding all possible address values in IPMB specification. ">IPMBL_TABLE</a>. </p>

</div>
</div>
<a id="aca6a53d56ec8961b4e336c23cbf38df5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca6a53d56ec8961b4e336c23cbf38df5">&#9670;&nbsp;</a></span>IPMI_HEADER_CHECKSUM_POSITION</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IPMI_HEADER_CHECKSUM_POSITION&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Position of Header cheksum byte in a IPMI message. </p>

</div>
</div>
<a id="a8e082d155fb84055bdbec5d79c79ae40"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e082d155fb84055bdbec5d79c79ae40">&#9670;&nbsp;</a></span>IPMI_MSG_MAX_LENGTH</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IPMI_MSG_MAX_LENGTH&#160;&#160;&#160;32</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Maximum length in bytes of a IPMI message (including connection header) </p>

</div>
</div>
<a id="a8545d3dbb61b93b24534c4fdb12c22a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8545d3dbb61b93b24534c4fdb12c22a1">&#9670;&nbsp;</a></span>IS_RESPONSE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IS_RESPONSE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">msg</td><td>)</td>
          <td>&#160;&#160;&#160;(msg.netfn &amp; 0x01)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Macro to check is the message is a response (odd netfn) </p>

</div>
</div>
<a id="afaf7373cd5c78bcaaf4c28d542cf0301"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afaf7373cd5c78bcaaf4c28d542cf0301">&#9670;&nbsp;</a></span>MCH_ADDRESS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MCH_ADDRESS&#160;&#160;&#160;0x20</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>MicroTCA's MCH slave address. </p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="ae1eb9f5f7f1857b588916fc76996942b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae1eb9f5f7f1857b588916fc76996942b">&#9670;&nbsp;</a></span>ipmb_error</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef enum <a class="el" href="ipmb_8h.html#a8d757edf82d973e9e19ea700b3cd0671">ipmb_error</a>  <a class="el" href="ipmb_8h.html#a8d757edf82d973e9e19ea700b3cd0671">ipmb_error</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>IPMB errors enumeration. </p>

</div>
</div>
<a id="a86681fd98135f77e4f734aa2e10a7b44"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a86681fd98135f77e4f734aa2e10a7b44">&#9670;&nbsp;</a></span>ipmi_msg</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structipmi__msg.html">ipmi_msg</a>  <a class="el" href="structipmi__msg.html">ipmi_msg</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>IPMI message struct. </p>

</div>
</div>
<a id="a27f8e7ec6001ddd7a5198ea85ed9353a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a27f8e7ec6001ddd7a5198ea85ed9353a">&#9670;&nbsp;</a></span>ipmi_msg_cfg</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structipmi__msg__cfg.html">ipmi_msg_cfg</a>  <a class="el" href="structipmi__msg__cfg.html">ipmi_msg_cfg</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>IPMI message configuration struct. </p>
<p>This struct is used in the IPMB layer in order to keep the informations about the request/response being handled </p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="acafd4fe8d7a215008eff9894312bd75c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acafd4fe8d7a215008eff9894312bd75c">&#9670;&nbsp;</a></span>GA_Pin_state</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="ipmb_8h.html#acafd4fe8d7a215008eff9894312bd75c">GA_Pin_state</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>GA pins definition. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="acafd4fe8d7a215008eff9894312bd75caefa0f3ce09b7d810dde1e3cde60f7c4f"></a>GROUNDED&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="acafd4fe8d7a215008eff9894312bd75ca40a9c795a3506e39806bbf31ead86255"></a>POWERED&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="acafd4fe8d7a215008eff9894312bd75ca29d18c1b3b6b68b4d20daf998bbd5c29"></a>UNCONNECTED&#160;</td><td class="fielddoc"></td></tr>
</table>

</div>
</div>
<a id="a8d757edf82d973e9e19ea700b3cd0671"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d757edf82d973e9e19ea700b3cd0671">&#9670;&nbsp;</a></span>ipmb_error</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="ipmb_8h.html#a8d757edf82d973e9e19ea700b3cd0671">ipmb_error</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>IPMB errors enumeration. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a8d757edf82d973e9e19ea700b3cd0671a357ace124ebe07e1ffaa75f34535ec4b"></a>ipmb_error_unknown&#160;</td><td class="fielddoc"><p>Unknown error </p>
</td></tr>
<tr><td class="fieldname"><a id="a8d757edf82d973e9e19ea700b3cd0671a9d8c377c0e97640f2402d7b4a3c80360"></a>ipmb_error_success&#160;</td><td class="fielddoc"><p>Generic no-error flag </p>
</td></tr>
<tr><td class="fieldname"><a id="a8d757edf82d973e9e19ea700b3cd0671ad37cbd724cd0363e4a98348d8665496f"></a>ipmb_error_failure&#160;</td><td class="fielddoc"><p>Generic failure on IPMB </p>
</td></tr>
<tr><td class="fieldname"><a id="a8d757edf82d973e9e19ea700b3cd0671a066b08561fe5c5c4d16d8ccecfe59276"></a>ipmb_error_timeout&#160;</td><td class="fielddoc"><p>Error raised when a message takes too long to be responded </p>
</td></tr>
<tr><td class="fieldname"><a id="a8d757edf82d973e9e19ea700b3cd0671a33b6833f21b14101de644ad63906956e"></a>ipmb_error_invalid_req&#160;</td><td class="fielddoc"><p>A invalid request was received </p>
</td></tr>
<tr><td class="fieldname"><a id="a8d757edf82d973e9e19ea700b3cd0671ac8e79b338f1d2fff50e6a98513d0cee1"></a>ipmb_error_hdr_chksum&#160;</td><td class="fielddoc"><p>Invalid header checksum from incoming message </p>
</td></tr>
<tr><td class="fieldname"><a id="a8d757edf82d973e9e19ea700b3cd0671acc3b44cea72a6950d91d71c20e74ac88"></a>ipmb_error_msg_chksum&#160;</td><td class="fielddoc"><p>Invalid message checksum from incoming message </p>
</td></tr>
<tr><td class="fieldname"><a id="a8d757edf82d973e9e19ea700b3cd0671a3ba59e89b5a3d7a347ec1c82e2347d91"></a>ipmb_error_queue_creation&#160;</td><td class="fielddoc"><p>Client queue couldn't be created. Invalid pointer to handler was given </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a1c987a2dc56422b57146391280f5e796"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c987a2dc56422b57146391280f5e796">&#9670;&nbsp;</a></span>get_ipmb_addr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t get_ipmb_addr </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads own I2C slave address using GA pins. </p>
<p>Based on coreipm/coreipm/mmc.c </p><dl class="section author"><dt>Author</dt><dd>Gokhan Sozmen</dd></dl>
<p>The state of each GA signal is represented by G (grounded), U (unconnected), or P (pulled up to Management Power).</p>
<p>The MMC drives P1 low and reads the GA lines. The MMC then drives P1 high and reads the GA lines. Any line that changes state between the two reads indicate an unconnected (U) pin.</p>
<p>The IPMB-L address of a Module can be calculated as (70h + Site Number x 2). <br />
 G = 0, P = 1, U = 2 <br />
 </p><table class="doxtable">
<tr>
<th align="center">Pin </th><th align="center">Ternary </th><th align="center">Decimal </th><th align="center">Address  </th></tr>
<tr>
<td align="center">GGG </td><td align="center">000 </td><td align="center">0 </td><td align="center">0x70 </td></tr>
<tr>
<td align="center">GGP </td><td align="center">001 </td><td align="center">1 </td><td align="center">0x8A </td></tr>
<tr>
<td align="center">GGU </td><td align="center">002 </td><td align="center">2 </td><td align="center">0x72 </td></tr>
<tr>
<td align="center">GPG </td><td align="center">010 </td><td align="center">3 </td><td align="center">0x8E </td></tr>
<tr>
<td align="center">GPP </td><td align="center">011 </td><td align="center">4 </td><td align="center">0x92 </td></tr>
<tr>
<td align="center">GPU </td><td align="center">012 </td><td align="center">5 </td><td align="center">0x90 </td></tr>
<tr>
<td align="center">GUG </td><td align="center">020 </td><td align="center">6 </td><td align="center">0x74 </td></tr>
<tr>
<td align="center">GUP </td><td align="center">021 </td><td align="center">7 </td><td align="center">0x8C </td></tr>
<tr>
<td align="center">GUU </td><td align="center">022 </td><td align="center">8 </td><td align="center">0x76 </td></tr>
<tr>
<td align="center">PGG </td><td align="center">100 </td><td align="center">9 </td><td align="center">0x98 </td></tr>
<tr>
<td align="center">PGP </td><td align="center">101 </td><td align="center">10 </td><td align="center">0x9C </td></tr>
<tr>
<td align="center">PGU </td><td align="center">102 </td><td align="center">11 </td><td align="center">0x9A </td></tr>
<tr>
<td align="center">PPG </td><td align="center">110 </td><td align="center">12 </td><td align="center">0xA0 </td></tr>
<tr>
<td align="center">PPP </td><td align="center">111 </td><td align="center">13 </td><td align="center">0xA4 </td></tr>
<tr>
<td align="center">PPU </td><td align="center">112 </td><td align="center">14 </td><td align="center">0x88 </td></tr>
<tr>
<td align="center">PUG </td><td align="center">120 </td><td align="center">15 </td><td align="center">0x9E </td></tr>
<tr>
<td align="center">PUP </td><td align="center">121 </td><td align="center">16 </td><td align="center">0x86 </td></tr>
<tr>
<td align="center">PUU </td><td align="center">122 </td><td align="center">17 </td><td align="center">0x84 </td></tr>
<tr>
<td align="center">UGG </td><td align="center">200 </td><td align="center">18 </td><td align="center">0x78 </td></tr>
<tr>
<td align="center">UGP </td><td align="center">201 </td><td align="center">19 </td><td align="center">0x94 </td></tr>
<tr>
<td align="center">UGU </td><td align="center">202 </td><td align="center">20 </td><td align="center">0x7A </td></tr>
<tr>
<td align="center">UPG </td><td align="center">210 </td><td align="center">21 </td><td align="center">0x96 </td></tr>
<tr>
<td align="center">UPP </td><td align="center">211 </td><td align="center">22 </td><td align="center">0x82 </td></tr>
<tr>
<td align="center">UPU </td><td align="center">212 </td><td align="center">23 </td><td align="center">0x80 </td></tr>
<tr>
<td align="center">UUG </td><td align="center">220 </td><td align="center">24 </td><td align="center">0x7C </td></tr>
<tr>
<td align="center">UUP </td><td align="center">221 </td><td align="center">25 </td><td align="center">0x7E </td></tr>
<tr>
<td align="center">UUU </td><td align="center">222 </td><td align="center">26 </td><td align="center">0xA2 </td></tr>
</table>
<dl class="section return"><dt>Returns</dt><dd>7-bit Slave Address </dd></dl>

</div>
</div>
<a id="a2f65cfe781d852b8d1394830ad0ec739"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f65cfe781d852b8d1394830ad0ec739">&#9670;&nbsp;</a></span>ipmb_assert_chksum()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ipmb_8h.html#a8d757edf82d973e9e19ea700b3cd0671">ipmb_error</a> ipmb_assert_chksum </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>buffer_len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Asserts the input message checksums by comparing them with our calculated ones. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buffer</td><td>Pointer to the message bytes. </td></tr>
    <tr><td class="paramname">buffer_len</td><td>Size of the message.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">ipmb_error_success</td><td>The message's checksum bytes are correct, therefore the message is valid. </td></tr>
    <tr><td class="paramname">ipmb_error_hdr_chksum</td><td>The header checksum byte is invalid. </td></tr>
    <tr><td class="paramname">ipmb_error_hdr_chksum</td><td>The final checksum byte is invalid. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a09d71f7adbd01a149b3778052c402b1d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a09d71f7adbd01a149b3778052c402b1d">&#9670;&nbsp;</a></span>ipmb_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ipmb_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the IPMB Layer. </p>
<p>Configures the I2C Driver, creates the TX queue for the IPMB Task and both IPMB RX and IPMB TX tasks </p>

</div>
</div>
<a id="a027dc1f6ba3d5176fb46bade2c7afd88"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a027dc1f6ba3d5176fb46bade2c7afd88">&#9670;&nbsp;</a></span>ipmb_register_rxqueue()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ipmb_8h.html#a8d757edf82d973e9e19ea700b3cd0671">ipmb_error</a> ipmb_register_rxqueue </td>
          <td>(</td>
          <td class="paramtype">QueueHandle_t *&#160;</td>
          <td class="paramname"><em>queue</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates and returns a queue in which the client can block to receive the incoming requests. </p>
<p>The queue is created and its handler is written at the given pointer (queue). Also keeps a copy of the handler to know where to write the incoming messages.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">queue</td><td>Pointer to a QueueHandle_t variable which will be written by this function.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">ipmb_error_success</td><td>The queue was successfully created. </td></tr>
    <tr><td class="paramname">ipmb_error_queue_creation</td><td>Queue creation failed due to lack of Heap space. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a5f3f27f298ef3643964b4085f905c031"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f3f27f298ef3643964b4085f905c031">&#9670;&nbsp;</a></span>IPMB_RXTask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void IPMB_RXTask </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>pvParameters</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>IPMB Receiver Task. </p>
<p>Similarly to <a class="el" href="ipmb_8h.html#a9da7268a374df3d8c20ec76bf5ae2a3a" title="IPMB Transmitter Task. ">IPMB_TXTask</a>, this task remains blocked until a new message is received by the I2C driver. The message passes through checksum checking to assure its integrity. <br />
 If the message is a request, we have to check if it's a new one or just a retransmission of the last. In order to do this, the sequential number is tested, since every request has a different one.<br />
 Right after that, the arrival time and the message body are stored for future checking and the specified client is notified using <a class="el" href="ipmb_8c.html#ac17c490ff29305243b72c2f83c919cf5" title="Notifies the client that a new request has arrived and copies the message to its queue. This function receives a message wrapped in a ipmi_msg_cfg struct and copies only the ipmi_msg field to the client queue. Also, if a task has registered its handle in the caller_task field, notify it. ">ipmb_notify_client</a>.</p>
<p>If we have received a response instead, we match it with the last stored request and also check if the awating request hasn't timed-out yet.</p>
<dl class="section note"><dt>Note</dt><dd>When a malformed message, a response without a request or a repeated request are received, they are just ignored, following the IPMB specifications.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pvParameters</td><td>Default parameter to FreeRTOS tasks, not used here. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="ipmb_8h.html#a9da7268a374df3d8c20ec76bf5ae2a3a" title="IPMB Transmitter Task. ">IPMB_TXTask</a> </dd>
<dd>
<a class="el" href="ipmb_8c.html#ac17c490ff29305243b72c2f83c919cf5" title="Notifies the client that a new request has arrived and copies the message to its queue. This function receives a message wrapped in a ipmi_msg_cfg struct and copies only the ipmi_msg field to the client queue. Also, if a task has registered its handle in the caller_task field, notify it. ">ipmb_notify_client</a> </dd></dl>

</div>
</div>
<a id="ab33457f43ce9d42f9335c94568bcee90"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab33457f43ce9d42f9335c94568bcee90">&#9670;&nbsp;</a></span>ipmb_send_request()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ipmb_8h.html#a8d757edf82d973e9e19ea700b3cd0671">ipmb_error</a> ipmb_send_request </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structipmi__msg.html">ipmi_msg</a> *&#160;</td>
          <td class="paramname"><em>req</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Format and send a request via IPMB channel. </p>

</div>
</div>
<a id="ac0769acd22719fe34c97c1961c91ba26"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac0769acd22719fe34c97c1961c91ba26">&#9670;&nbsp;</a></span>ipmb_send_response()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ipmb_8h.html#a8d757edf82d973e9e19ea700b3cd0671">ipmb_error</a> ipmb_send_response </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structipmi__msg.html">ipmi_msg</a> *&#160;</td>
          <td class="paramname"><em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structipmi__msg.html">ipmi_msg</a> *&#160;</td>
          <td class="paramname"><em>resp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Format and send a response via IPMB channel. </p>

</div>
</div>
<a id="a9da7268a374df3d8c20ec76bf5ae2a3a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9da7268a374df3d8c20ec76bf5ae2a3a">&#9670;&nbsp;</a></span>IPMB_TXTask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void IPMB_TXTask </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>pvParameters</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>IPMB Transmitter Task. </p>
<p>When <a class="el" href="ipmb_8h.html#ab33457f43ce9d42f9335c94568bcee90" title="Format and send a request via IPMB channel. ">ipmb_send_request</a> or <a class="el" href="ipmb_8h.html#ac0769acd22719fe34c97c1961c91ba26" title="Format and send a response via IPMB channel. ">ipmb_send_response</a> put a message in <a class="el" href="ipmb_8c.html#a194d3916e321c0f95416bb70055b23b3">ipmb_txqueue</a>, this task unblocks. First step to send a message is differentiating requests from responses. It does this analyzing the parity of NetFN (even for requests, odd for responses).</p>
<p>When sending a response, this task has to check if it matches with the sequence number from the last known request and the amount of time it took to be built (timeout checking). Last step is checking if it has already tried to send this message more than <a class="el" href="ipmb_8h.html#a5546e89aff8048ba1e566aaaed175c27" title="Maximum retries made by IPMB TX Task when sending a message. ">IPMB_MAX_RETRIES</a> value. <br />
 After passing all checking, the message is formatted as the IPMB protocol demands and passed down to the I2C driver, using the function xI2CWrite(). <br />
 If an error comes out of the I2C driver when sending the message, it increases the retry counter in the <a class="el" href="structipmi__msg__cfg.html" title="IPMI message configuration struct. ">ipmi_msg_cfg</a> struct and send the message to the front of <a class="el" href="ipmb_8c.html#a194d3916e321c0f95416bb70055b23b3">ipmb_txqueue</a>. <br />
 If no errors occurs, the task that put the message in the queue is notified with a success flag.</p>
<p>The proccess is analog when sending a request, but the only check that is made is the retry number. The task skip all checking because, when sending a request, the message is formatted using it's own functions <a class="el" href="ipmb_8h.html#ab33457f43ce9d42f9335c94568bcee90" title="Format and send a request via IPMB channel. ">ipmb_send_request</a> or <a class="el" href="ipmb_8h.html#ac0769acd22719fe34c97c1961c91ba26" title="Format and send a response via IPMB channel. ">ipmb_send_response</a> and they are guaranteed to put only valid messages in queue. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pvParameters</td><td>Default parameter to FreeRTOS tasks, not used here. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="ipmb_8h.html#a5f3f27f298ef3643964b4085f905c031" title="IPMB Receiver Task. ">IPMB_RXTask</a> </dd>
<dd>
<a class="el" href="ipmb_8h.html#ab33457f43ce9d42f9335c94568bcee90" title="Format and send a request via IPMB channel. ">ipmb_send_request</a> </dd>
<dd>
<a class="el" href="ipmb_8h.html#ac0769acd22719fe34c97c1961c91ba26" title="Format and send a response via IPMB channel. ">ipmb_send_response</a> </dd></dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ad8fcfee4697fe45151d15d0caed4201f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad8fcfee4697fe45151d15d0caed4201f">&#9670;&nbsp;</a></span>ipmb_addr</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t ipmb_addr</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>AMC IPMB Address. </p>
<p>This variable saves this module's IPMB address read through the Geographical Address pins</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="ipmb_8h.html#a1c987a2dc56422b57146391280f5e796" title="Reads own I2C slave address using GA pins. ">get_ipmb_addr</a> </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_e05d7e2b1ecd646af5bb94391405f3b5.html">modules</a></li><li class="navelem"><a class="el" href="ipmb_8h.html">ipmb.h</a></li>
    <li class="footer">Generated on Fri Jun 11 2021 18:45:51 for openMMC by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
