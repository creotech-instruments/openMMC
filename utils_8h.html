<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>openMMC: modules/utils.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">openMMC
   </div>
   <div id="projectbrief">Open Source Modular MMC for AMCs</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('utils_8h.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">utils.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>General utilities functions.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;FreeRTOS.h&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for utils.h:</div>
<div class="dyncontent">
<div class="center"><img src="utils_8h__incl.png" border="0" usemap="#modules_2utils_8h" alt=""/></div>
<map name="modules_2utils_8h" id="modules_2utils_8h">
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="utils_8h__dep__incl.png" border="0" usemap="#modules_2utils_8hdep" alt=""/></div>
<map name="modules_2utils_8hdep" id="modules_2utils_8hdep">
<area shape="rect" id="node2" href="amc__fru_8c.html" title="modules/amc_fru.c" alt="" coords="731,87,877,114"/>
<area shape="rect" id="node3" href="fpga__spi_8h.html" title="modules/fpga_spi.h" alt="" coords="901,87,1051,114"/>
<area shape="rect" id="node9" href="afc-bpm_2v3__1_2sdr__list_8c.html" title="port/board/afc&#45;bpm\l/v3_1/sdr_list.c" alt="" coords="903,169,1049,211"/>
<area shape="rect" id="node10" href="afc-fofb-ctrl_2v3__1_2sdr__list_8c.html" title="port/board/afc&#45;fofb\l&#45;ctrl/v3_1/sdr_list.c" alt="" coords="1074,169,1219,211"/>
<area shape="rect" id="node11" href="afc-timing_2sdr__list_8c.html" title="port/board/afc&#45;timing\l/sdr_list.c" alt="" coords="1244,169,1404,211"/>
<area shape="rect" id="node12" href="afc-v4_2sdr__list_8c.html" title="port/board/afc&#45;v4/sdr\l_list.c" alt="" coords="1429,169,1587,211"/>
<area shape="rect" id="node13" href="fru_8c.html" title="modules/fru.c" alt="" coords="1283,87,1394,114"/>
<area shape="rect" id="node14" href="fru__editor_8c.html" title="modules/fru_editor.c" alt="" coords="1419,87,1573,114"/>
<area shape="rect" id="node15" href="hpm_8c.html" title="modules/hpm.c" alt="" coords="1597,87,1720,114"/>
<area shape="rect" id="node16" href="ipmb_8c.html" title="modules/ipmb.c" alt="" coords="1745,87,1871,114"/>
<area shape="rect" id="node17" href="hotswap_8c.html" title="Hotswap sensors implementation. " alt="" coords="1896,87,2099,114"/>
<area shape="rect" id="node18" href="lm75_8c.html" title="Interface functions for LM75 I2C Temperature Sensor. " alt="" coords="2123,87,2303,114"/>
<area shape="rect" id="node19" href="max6642_8c.html" title="MAX6642 I2C Temperature Sensor Interface implementation. " alt="" coords="2328,87,2536,114"/>
<area shape="rect" id="node20" href="utils_8c.html" title="General utilities functions. " alt="" coords="2561,87,2682,114"/>
<area shape="rect" id="node21" href="afc-bpm_2v3__1_2payload_8c.html" title="port/board/afc&#45;bpm\l/v3_1/payload.c" alt="" coords="2707,80,2853,121"/>
<area shape="rect" id="node22" href="afc-fofb-ctrl_2v3__1_2payload_8c.html" title="port/board/afc&#45;fofb\l&#45;ctrl/v3_1/payload.c" alt="" coords="2878,80,3029,121"/>
<area shape="rect" id="node23" href="afc-timing_2payload_8c.html" title="port/board/afc&#45;timing\l/payload.c" alt="" coords="3053,80,3213,121"/>
<area shape="rect" id="node24" href="afc-v4_2payload_8c.html" title="port/board/afc&#45;v4/payload.c" alt="" coords="3238,87,3439,114"/>
<area shape="rect" id="node25" href="rtm-8sfp_2rtm__user_8c.html" title="port/board/rtm&#45;8sfp\l/rtm_user.c" alt="" coords="3464,80,3613,121"/>
<area shape="rect" id="node26" href="rtm-8sfp_2sdr__list_8c.html" title="port/board/rtm&#45;8sfp\l/sdr_list.c" alt="" coords="3637,80,3787,121"/>
<area shape="rect" id="node27" href="rtm-lamp_2rtm__user_8c.html" title="port/board/rtm&#45;lamp\l/rtm_user.c" alt="" coords="3811,80,3965,121"/>
<area shape="rect" id="node28" href="rtm-lamp_2sdr__list_8c.html" title="port/board/rtm&#45;lamp\l/sdr_list.c" alt="" coords="3989,80,4144,121"/>
<area shape="rect" id="node4" href="fpga__spi_8c.html" title="modules/fpga_spi.c" alt="" coords="579,177,727,203"/>
<area shape="rect" id="node5" href="main_8c.html" title="modules/main.c" alt="" coords="751,177,878,203"/>
<area shape="rect" id="node6" href="sdr_8c.html" title="modules/sdr.c" alt="" coords="5,177,117,203"/>
<area shape="rect" id="node7" href="ina220_8c.html" title="INA220 interface implementation. " alt="" coords="142,177,333,203"/>
<area shape="rect" id="node8" href="ina3221_8c.html" title="INA3221 interface implementation. " alt="" coords="357,177,555,203"/>
</map>
</div>
</div>
<p><a href="utils_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a18d295a837ac71add5578860b55e5502"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="utils_8h.html#a18d295a837ac71add5578860b55e5502">STR</a>(x)&#160;&#160;&#160;<a class="el" href="utils_8h.html#a34fbaf7ed82e04e522ca124b6aea8db1">_STR</a>(x)</td></tr>
<tr class="memdesc:a18d295a837ac71add5578860b55e5502"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stringify a macro.  <a href="#a18d295a837ac71add5578860b55e5502">More...</a><br /></td></tr>
<tr class="separator:a18d295a837ac71add5578860b55e5502"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34fbaf7ed82e04e522ca124b6aea8db1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="utils_8h.html#a34fbaf7ed82e04e522ca124b6aea8db1">_STR</a>(x)&#160;&#160;&#160;#x</td></tr>
<tr class="separator:a34fbaf7ed82e04e522ca124b6aea8db1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4259d33ba8f3fa1d78379bfa7581ee94"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="utils_8h.html#a4259d33ba8f3fa1d78379bfa7581ee94">STR_SIZE</a>(x)&#160;&#160;&#160;(sizeof(x) -1)</td></tr>
<tr class="memdesc:a4259d33ba8f3fa1d78379bfa7581ee94"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets length of a macro string.  <a href="#a4259d33ba8f3fa1d78379bfa7581ee94">More...</a><br /></td></tr>
<tr class="separator:a4259d33ba8f3fa1d78379bfa7581ee94"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a4da28eea723ce5be9be3cafbf3c2eec5"><td class="memItemLeft" align="right" valign="top">TickType_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="utils_8h.html#a4da28eea723ce5be9be3cafbf3c2eec5">getTickDifference</a> (TickType_t current_time, TickType_t start_time)</td></tr>
<tr class="memdesc:a4da28eea723ce5be9be3cafbf3c2eec5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate the difference between 2 tick values.  <a href="#a4da28eea723ce5be9be3cafbf3c2eec5">More...</a><br /></td></tr>
<tr class="separator:a4da28eea723ce5be9be3cafbf3c2eec5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a134816e32f4a2df3247444d75a1ce361"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="utils_8h.html#a134816e32f4a2df3247444d75a1ce361">calculate_chksum</a> (uint8_t *buffer, uint8_t range)</td></tr>
<tr class="memdesc:a134816e32f4a2df3247444d75a1ce361"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate a n-byte message 2's complement checksum.  <a href="#a134816e32f4a2df3247444d75a1ce361">More...</a><br /></td></tr>
<tr class="separator:a134816e32f4a2df3247444d75a1ce361"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a839606a1b09e2884aef6b255045ab825"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="utils_8h.html#a839606a1b09e2884aef6b255045ab825">cmpBuffs</a> (uint8_t *bufa, size_t len_a, uint8_t *bufb, size_t len_b)</td></tr>
<tr class="memdesc:a839606a1b09e2884aef6b255045ab825"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compare 2 buffers.  <a href="#a839606a1b09e2884aef6b255045ab825">More...</a><br /></td></tr>
<tr class="separator:a839606a1b09e2884aef6b255045ab825"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad00b36606f6f731f08c50fdbf3e31928"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="utils_8h.html#ad00b36606f6f731f08c50fdbf3e31928">isPowerOfTwo</a> (uint8_t x)</td></tr>
<tr class="memdesc:ad00b36606f6f731f08c50fdbf3e31928"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check is a number is a power of 2.  <a href="#ad00b36606f6f731f08c50fdbf3e31928">More...</a><br /></td></tr>
<tr class="separator:ad00b36606f6f731f08c50fdbf3e31928"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>General utilities functions. </p>
<dl class="section author"><dt>Author</dt><dd>Henrique Silva </dd></dl>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a34fbaf7ed82e04e522ca124b6aea8db1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34fbaf7ed82e04e522ca124b6aea8db1">&#9670;&nbsp;</a></span>_STR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define _STR</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">x</td><td>)</td>
          <td>&#160;&#160;&#160;#x</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a18d295a837ac71add5578860b55e5502"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a18d295a837ac71add5578860b55e5502">&#9670;&nbsp;</a></span>STR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define STR</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">x</td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="utils_8h.html#a34fbaf7ed82e04e522ca124b6aea8db1">_STR</a>(x)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stringify a macro. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">x</td><td>Value to be stringifyed </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a4259d33ba8f3fa1d78379bfa7581ee94"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4259d33ba8f3fa1d78379bfa7581ee94">&#9670;&nbsp;</a></span>STR_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define STR_SIZE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">x</td><td>)</td>
          <td>&#160;&#160;&#160;(sizeof(x) -1)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets length of a macro string. </p>
<dl class="section note"><dt>Note</dt><dd>This macro behaviour is equivalent to strlen()</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">x</td><td>Macro string </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a134816e32f4a2df3247444d75a1ce361"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a134816e32f4a2df3247444d75a1ce361">&#9670;&nbsp;</a></span>calculate_chksum()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t calculate_chksum </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>range</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calculate a n-byte message 2's complement checksum. </p>
<p>The checksum byte is calculated by perfoming a simple 8bit 2's complement of the sum of all previous bytes. Since we're using a unsigned int to hold the checksum value, we only need to subtract all bytes from it.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buffer</td><td>Pointer to the message bytes. </td></tr>
    <tr><td class="paramname">range</td><td>How many bytes will be used in the calculation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Checksum of the specified bytes of the buffer. </dd></dl>

</div>
</div>
<a id="a839606a1b09e2884aef6b255045ab825"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a839606a1b09e2884aef6b255045ab825">&#9670;&nbsp;</a></span>cmpBuffs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t cmpBuffs </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>bufa</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len_a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>bufb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len_b</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Compare 2 buffers. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bufa</td><td>First buffer to compare </td></tr>
    <tr><td class="paramname">len_a</td><td>Length of bufa </td></tr>
    <tr><td class="paramname">bufb</td><td>Second buffer to compare </td></tr>
    <tr><td class="paramname">len_b</td><td>Length of bufb</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0x00</td><td>Buffers are equal </td></tr>
    <tr><td class="paramname">0xFF</td><td>Buffers are different </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a4da28eea723ce5be9be3cafbf3c2eec5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4da28eea723ce5be9be3cafbf3c2eec5">&#9670;&nbsp;</a></span>getTickDifference()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TickType_t getTickDifference </td>
          <td>(</td>
          <td class="paramtype">TickType_t&#160;</td>
          <td class="paramname"><em>current_time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TickType_t&#160;</td>
          <td class="paramname"><em>start_time</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calculate the difference between 2 tick values. </p>
<p>Since the tick counter can overflow, we need to check if the current value is higher than the start time before performing any calculations. The Tick counter is expected to overflow at the portMAX_DELAY value</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">current_time</td><td>Current tick count </td></tr>
    <tr><td class="paramname">start_time</td><td>Start tick count</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Tick difference between arguments </dd></dl>

</div>
</div>
<a id="ad00b36606f6f731f08c50fdbf3e31928"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad00b36606f6f731f08c50fdbf3e31928">&#9670;&nbsp;</a></span>isPowerOfTwo()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t isPowerOfTwo </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>x</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check is a number is a power of 2. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">x</td><td>Number to be tested</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">1</td><td>Number is a power of two </td></tr>
    <tr><td class="paramname">0</td><td>Number is not a power of two </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_e05d7e2b1ecd646af5bb94391405f3b5.html">modules</a></li><li class="navelem"><a class="el" href="utils_8h.html">utils.h</a></li>
    <li class="footer">Generated on Fri Jun 11 2021 18:45:51 for openMMC by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
